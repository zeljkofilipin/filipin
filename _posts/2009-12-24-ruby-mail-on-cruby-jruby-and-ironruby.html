---
layout: post
title: Ruby Mail on CRuby, JRuby and IronRuby
date: 2009-12-24 17:01:41.000000000 +01:00
---
<p>Today I tried Mikel Lindsaar's <a href="http://github.com/mikel/mail">Mail</a> gem on <a href="http://www.ruby-lang.org/en/">CRuby</a>, <a href="http://jruby.org/">JRuby</a> and <a href="http://www.ironruby.net/">IronRuby</a>.</p>
<p>Installation of each Ruby version and Mail gem was really easy so I will not describe it here. What interested me was how fast was Mail on each Ruby implementation.</p>
<p>I have created a simple mail and saved it as <code>1.eml</code>.</p>
<p>[sourcecode language="text"]<br />
Date: Thu, 24 Dec 2009 14:37:34 Central European Standard Time<br />
From: from@test.com<br />
To: to@test.com<br />
Message-ID: &lt;4b336e9e762a0_a1014263a4689d3@2003-ie7.mail&gt;<br />
Subject: This is a test email<br />
Mime-Version: 1.0<br />
Content-Type: text/plain;<br />
	charset=&quot;US-ASCII&quot;;<br />
Content-Transfer-Encoding: 7bit</p>
<p>Some text for mail body<br />
[/sourcecode]</p>
<p>This script will read the file, display subject and time elapsed (in seconds).</p>
<p>[sourcecode language="ruby"]<br />
time = Time.now<br />
require &quot;rubygems&quot;<br />
require &quot;mail&quot;<br />
mail = Mail.read(&quot;1.eml&quot;)<br />
puts mail.subject.to_s<br />
puts Time.now - time<br />
[/sourcecode]</p>
<p>I have executed the script three times for each Ruby implementation. It looks to me that CRuby and JRuby are similar in speed, and IronRuby is way slower.</p>
<table border="1">
<tbody>
<tr>
<th>Test Run</th>
<th>CRuby</th>
<th>JRuby</th>
<th>IronRuby</th>
</tr>
<tr>
<td>1</td>
<td>2.594</td>
<td>3.0</td>
<td>9.8125</td>
</tr>
<tr>
<td>2</td>
<td>2.109</td>
<td>2.016</td>
<td>7.796875</td>
</tr>
<tr>
<td>3</td>
<td>2.11</td>
<td>2.0</td>
<td>7.6875</td>
</tr>
</tbody>
</table>
<table>
<h2>Environment</h2>
<p>Tests were run in VMware Fusion 2.0.6 virtual machine, 512 MB RAM, Microsoft Windows Sever 2003 R2 (Standard Edition, Service pack 2).<br />
Host machine is MacBook Pro, 2.4 GHz Intel Core 2 Duo, Mac OS X 10.6.2, 4 GB RAM.</p>
<p>[sourcecode language="bash"]<br />
&gt;ruby -v<br />
ruby 1.8.6 (2007-09-24 patchlevel 111) [i386-mswin32]</p>
<p>&gt;jruby -v<br />
jruby 1.4.0 (ruby 1.8.7 patchlevel 174) (2009-11-02 69fbfa3) (Java HotSpot(TM) Client VM 1.6.0_10) [x86-java]</p>
<p>&gt;ir -v<br />
IronRuby 0.9.3.0 on .NET 2.0.0.0<br />
[/sourcecode]</p>
<p>Mail version 1.3.4 on all platforms.</table>
