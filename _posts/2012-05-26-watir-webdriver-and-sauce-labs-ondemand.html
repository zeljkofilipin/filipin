---
layout: post
title: watir-webdriver and Sauce Labs OnDemand
date: 2012-05-26 18:56:57.000000000 +02:00
categories:
- Watir
tags:
- code
- Sauce Labs OnDemand
- watir
status: publish
type: post
published: true
meta:
  _edit_last: '3'
  _podPressPostSpecific: a:6:{s:15:"itunes:subtitle";s:15:"##PostExcerpt##";s:14:"itunes:summary";s:15:"##PostExcerpt##";s:15:"itunes:keywords";s:17:"##WordPressCats##";s:13:"itunes:author";s:10:"##Global##";s:15:"itunes:explicit";s:7:"Default";s:12:"itunes:block";s:7:"Default";}
  _syntaxhighlighter_encoded: '1'
author:
  login: zeljko.filipin
  email: zeljko.filipin@gmail.com
  display_name: "Željko Filipin"
  first_name: "Željko"
  last_name: Filipin
---
<p>[caption id="attachment_1633" align="alignnone" width="300" caption="Bug Hunter&#039;s Journal"]<a href="http://zeljkofilipin.com/wp-content/uploads/2012/05/bug_hunter.jpg"><img src="assets/bug_hunter-300x300.jpg" alt="Bug Hunter&#039;s Journal" title="Bug Hunter&#039;s Journal" width="300" height="300" class="size-medium wp-image-1633" /></a>[/caption]</p>
<p>For a couple of clients I have been running <a href="http://watir.com/">watir</a>-webdriver tests using <a href="http://saucelabs.com/ondemand">Sauce Labs OnDemand</a>. Never heard about it? In short, instead of driving a browser at your local machine, you can drive a browser <em>in the cloud</em>. Sounds cool, right?</p>
<p>What changes should you do to your existing watir-webdriver scripts to run them <em>in the cloud</em>?</p>
<p>This would open Firefox at your local machine:</p>
<p>[sourcecode language="ruby"]<br />
require &quot;rubygems&quot;<br />
require &quot;watir-webdriver&quot;<br />
browser = Watir::Browser.new :firefox<br />
[/sourcecode]</p>
<p>And this would open Firefox at Sauce Labs OnDemand:</p>
<p>[sourcecode language="ruby"]<br />
require &quot;watir-webdriver&quot;<br />
caps = Selenium::WebDriver::Remote::Capabilities.firefox<br />
caps.version = &quot;11&quot;<br />
caps.platform = :LINUX<br />
caps[:name] = &quot;testing this cloud thing&quot;<br />
browser = Watir::Browser.new(<br />
  :remote,<br />
  :url =&gt; &quot;http://username:api-key@ondemand.saucelabs.com:80/wd/hub&quot;,<br />
  :desired_capabilities =&gt; caps)<br />
[/sourcecode]</p>
<p>You have to replace <code>username</code> and <code>api-key</code> with your username and API key. If you do not have saucelabs.com account, you can get one for free. Free account has limitation of 200 minutes of driving a browser per month, but that is more than enough to try.</p>
<p>You can run the above code by pasting it into <a href="http://en.wikipedia.org/wiki/Interactive_Ruby_Shell">IRB</a>, or paste it into a Ruby file (named <code>cloud.rb</code>, for example) and just run the file from command line.</p>
<p>After the browser is opened, you can drive it as usual.</p>
<p>Now go to <a href="https://saucelabs.com/jobs">https://saucelabs.com/jobs</a> and there should be a test with status <em>running</em> and name <em>testing this cloud thing</em>.</p>
<p>[caption id="attachment_1646" align="alignnone" width="625" caption="testing this cloud thing"]<a href="http://zeljkofilipin.com/wp-content/uploads/2012/05/running.png"><img src="assets/running.png" alt="testing this cloud thing" title="testing this cloud thing" width="625" height="281" class="size-full wp-image-1646" /></a>[/caption]</p>
<p>Click the test name and you will see live video of the browser running <em>in the cloud</em>. After the test is finished you will be able to view the video and see the screenshots that (I think) are automatically taken for every page that the browser opens.</p>
