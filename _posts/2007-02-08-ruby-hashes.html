---
layout: post
title: Ruby Hashes
date: 2007-02-08 15:25:06.000000000 +01:00
categories:
- Ruby
tags: []
status: publish
type: post
published: true
meta: {}
author:
  login: zeljko.filipin
  email: zeljko.filipin@gmail.com
  display_name: "Željko Filipin"
  first_name: "Željko"
  last_name: Filipin
---
<p>I have seen Ruby hashes in use, but I never needed them. Until today. I was testing edit community feature. I started with editing title.</p>
<p>[source:ruby]<br />
edit(title)<br />
[/source]</p>
<p>I created class <code>Community</code> and method <code>edit</code>.</p>
<p>[source:ruby]<br />
def edit(title)<br />
  prepare_for_edit<br />
  edit_title(title)<br />
  check_after_edit<br />
end<br />
[/source]</p>
<p>Then I tested editing other community properties. Sometimes I need to edit just one property, sometimes a few of them and sometimes all properties. The only way I could think of how to do it is to make all arguments of <code>edit</code> method optional.</p>
<p>[source:ruby]<br />
def edit(title = nil, url = nil, mail = nil,<br />
           description = nil, membership = nil,<br />
           status = nil, security = nil)<br />
  prepare_for_edit<br />
  edit_title(title) if title<br />
  edit_url(url) if url<br />
  edit_mail(mail) if mail<br />
  edit_description(description) if description<br />
  edit_membership(membership) if membership<br />
  edit_status(status) if status<br />
  edit_security(security) if security<br />
  check_after_edit<br />
end<br />
[/source]</p>
<p>But that caused ugly code when calling <code>edit</code> method if, for example, I only wanted to change security property.</p>
<p>[source:ruby]<br />
edit(nil, nil, nil, nil, nil, nil, security)<br />
[/source]</p>
<p>I could make <code>edit_security</code> (and <code>edit_title</code>, <code>edit_url</code>...).</p>
<p>[source:ruby]<br />
edit_security(security)<br />
[/source]</p>
<p>[source:ruby]<br />
def edit_security(security)<br />
  prepare_for_edit<br />
  set_security(security)<br />
  check_after_edit<br />
end<br />
[/source]</p>
<p>Better, but I wanted to try hashes, and it worked great.</p>
<p>[source:ruby]<br />
edit({"security" => "low"})<br />
edit({"security" => "low", "status" => "offline"})<br />
[/source]</p>
<p>[source:ruby]<br />
def edit(properties)<br />
  prepare_for_edit<br />
  edit_title(properties["title"]) if properties["title"]<br />
  edit_url(properties["url"]) if properties["url"]<br />
  edit_mail(properties["mail"]) if properties["mail"]<br />
  edit_description(properties["description"]) if properties["description"]<br />
  edit_membership(properties["membership"]) if properties["membership"]<br />
  edit_status(properties["status"]) if properties["status"]<br />
  edit_security(properties["security"]) if properties["security"]<br />
  check_after_edit<br />
end<br />
[/source]</p>
