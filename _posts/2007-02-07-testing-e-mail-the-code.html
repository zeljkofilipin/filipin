---
tags:  code ruby
title: 'Testing E-mail: The Code'
---
<p>Lately I have been testing e-mail functionality of web application. This is the fifth post about that experience. Last week I wrote about <a href="http://filipin.eu/2007/01/30/testing-e-mail-lessons-learned/">lessons learned</a>.</p>
<p>I have written a little framework that helps me with testing e-mail.</p>
<p>To use it, you will have to install <a href="http://www.ruby-lang.org/en/downloads/">Ruby</a>, <a href="http://filipin.eu/2006/10/12/test-if-application-sends-correct-e-mails/">Tmail</a> and <a href="http://filipin.eu/2007/01/17/testing-e-mail-install-smtp-server/">SMTP server</a>.</p>
<p>Then download <a href="http://filipin.eu/wp-content/uploads/2007/02/mail.zip" title="mail.zip" onclick="javascript:urchinTracker ('/mail_zip'); ">mail.zip</a> (2,20 KB) and extract it. No installation required. There are even some unit tests (unit_tests.rb) and example code (usage.rb).</p>
<p>Send mail.</p>
<p>[source language="ruby"]<br />
SendMail.new(<br />
  &quot;user@domain&quot;,<br />
  &quot;application@domain&quot;,<br />
  &quot;title&quot;,<br />
  &quot;body&quot;).send<br />
[/source]</p>
<p>Check if application sent mail that you have expected.</p>
<p>[source language="ruby"]<br />
Mail.received?(<br />
  [Mail.new(<br />
    &quot;application@domain&quot;,<br />
    &quot;user@domain&quot;,<br />
    &quot;title&quot;)])<br />
[/source]</p>
<p>For now, mail that is sent can only contain from, to, subject and body. While receiving, I only check from, to and subject.</p>
<p>This is code that I am really using every day.</p>
<p>Please understand that I am a tester, not a developer, and I know that this code could be better. Feel free to improve it. Post bug reports and your comments here.</p>
